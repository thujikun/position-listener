(function(a){"use strict";var b,c,d=window.requestAnimationFrame||window.webkitAnimationFrame||window.mozAnimationFrame||window.oAnimationFrame||function(a){setTimeout(function(){a()},1e3/60)},e=a(window);b={init:function(){e.on("resize",a.proxy(this.handleResize,this)),e.on("scroll",a.proxy(this.handleScroll,this)),setTimeout(function(){e.trigger("position-listener-scroll")},1e3/60)},handleResize:function(){var a=this,b=arguments;d(function(){a.handleScroll.apply(a,b)})},handleScroll:function(){e.trigger("position-listener-scroll")}},c={listenerIds:[],listeners:{},addPositionListener:function(a){this.listenerIds.push(a.id),this.listeners[a.id]={isElementIn:!1,triggerPosition:a.triggerPosition,element:a.element,listener:a.listener,once:a.once}},removePositionListener:function(b){var c=a.inArray(b,this.listenerIds);this.listeners[b]=null,c>=0&&this.listenerIds.splice(c,1)},getInListener:function(b,c){var d=this;return function(){var e=a(c.element);c.listener.call(c.element,{target:c.element,isElementIn:!0}),c.once&&(d.removePositionListener(b),e.removeData("jquery-position-listener-id"))}},getOutListener:function(a){return function(){a.listener.call(a.element,{target:a.element,isElementIn:!1})}},execute:function(){var b,c,f,g,h,i,j,k,l=e.scrollTop(),m=window.innerHeight||e.height(),n=this.listenerIds,o=this.listeners,p=[];for(j=0,k=n.length;k>j;j++)b=o[n[j]],c=a(b.element),f=c.offset().top,g=f-l,h=m*b.triggerPosition,i=(m-g)/h,!b.isElementIn&&i>=1?(p.push(this.getInListener(n[j],b)),b.isElementIn=!0):b.isElementIn&&1>i&&(p.push(this.getOutListener(b)),b.isElementIn=!1);for(j=0,k=p.length;k>j;j++)d(p[j]);this.scrollTop=l}},a.fn.extend({addPositionListener:function(b,d,e){return a(this).each(function(){var f=Math.random(),g={id:"jquery-position-listener-id-"+(new Date).getTime()+f,once:!!e,triggerPosition:b,element:this,listener:d};c.addPositionListener(g),a(this).data("jquery-position-listener-id",g.id)})},removePositionTrigger:function(a){c.removePositionListener(a)}}),b.init(),e.on("position-listener-scroll",a.proxy(c.execute,c)),"function"==typeof define&&define.amd&&define("positionlistener",[],function(){return jQuery})}).call(window,jQuery);